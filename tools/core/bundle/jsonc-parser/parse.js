function R(T,X=!1){let J=T.length,L=0,q="",Z=0,Q=16,A=0,H=0,D=0,I=0,W=0;function w(z,M){let k=0,Y=0;while(k<z||!M){let B=T.charCodeAt(L);if(B>=48&&B<=57)Y=Y*16+B-48;else if(B>=65&&B<=70)Y=Y*16+B-65+10;else if(B>=97&&B<=102)Y=Y*16+B-97+10;else break;L++,k++}if(k<z)Y=-1;return Y}function V(z){L=z,q="",Z=0,Q=16,W=0}function _(){let z=L;if(T.charCodeAt(L)===48)L++;else{L++;while(L<T.length&&b(T.charCodeAt(L)))L++}if(L<T.length&&T.charCodeAt(L)===46)if(L++,L<T.length&&b(T.charCodeAt(L))){L++;while(L<T.length&&b(T.charCodeAt(L)))L++}else return W=3,T.substring(z,L);let M=L;if(L<T.length&&(T.charCodeAt(L)===69||T.charCodeAt(L)===101)){if(L++,L<T.length&&T.charCodeAt(L)===43||T.charCodeAt(L)===45)L++;if(L<T.length&&b(T.charCodeAt(L))){L++;while(L<T.length&&b(T.charCodeAt(L)))L++;M=L}else W=3}return T.substring(z,M)}function N(){let z="",M=L;while(!0){if(L>=J){z+=T.substring(M,L),W=2;break}let k=T.charCodeAt(L);if(k===34){z+=T.substring(M,L),L++;break}if(k===92){if(z+=T.substring(M,L),L++,L>=J){W=2;break}switch(T.charCodeAt(L++)){case 34:z+='"';break;case 92:z+="\\";break;case 47:z+="/";break;case 98:z+="\b";break;case 102:z+="\f";break;case 110:z+=`
`;break;case 114:z+="\r";break;case 116:z+="\t";break;case 117:{let B=w(4,!0);if(B>=0)z+=String.fromCharCode(B);else W=4}break;default:W=5}M=L;continue}if(k>=0&&k<=31)if(j(k)){z+=T.substring(M,L),W=2;break}else W=6;L++}return z}function U(){if(q="",W=0,Z=L,H=A,I=D,L>=J)return Z=J,Q=17;let z=T.charCodeAt(L);if(g(z)){do L++,q+=String.fromCharCode(z),z=T.charCodeAt(L);while(g(z));return Q=15}if(j(z)){if(L++,q+=String.fromCharCode(z),z===13&&T.charCodeAt(L)===10)L++,q+=`
`;return A++,D=L,Q=14}switch(z){case 123:return L++,Q=1;case 125:return L++,Q=2;case 91:return L++,Q=3;case 93:return L++,Q=4;case 58:return L++,Q=6;case 44:return L++,Q=5;case 34:return L++,q=N(),Q=10;case 47:{let M=L-1;if(T.charCodeAt(L+1)===47){L+=2;while(L<J){if(j(T.charCodeAt(L)))break;L++}return q=T.substring(M,L),Q=12}if(T.charCodeAt(L+1)===42){L+=2;let k=J-1,Y=!1;while(L<k){let B=T.charCodeAt(L);if(B===42&&T.charCodeAt(L+1)===47){L+=2,Y=!0;break}if(L++,j(B)){if(B===13&&T.charCodeAt(L)===10)L++;A++,D=L}}if(!Y)L++,W=1;return q=T.substring(M,L),Q=13}return q+=String.fromCharCode(z),L++,Q=16}case 45:if(q+=String.fromCharCode(z),L++,L===J||!b(T.charCodeAt(L)))return Q=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return q+=_(),Q=11;default:while(L<J&&O(z))L++,z=T.charCodeAt(L);if(Z!==L){switch(q=T.substring(Z,L),q){case"true":return Q=8;case"false":return Q=9;case"null":return Q=7}return Q=16}return q+=String.fromCharCode(z),L++,Q=16}}function O(z){if(g(z)||j(z))return!1;switch(z){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let z;do z=U();while(z>=12&&z<=15);return z}return{setPosition:V,getPosition:()=>L,scan:X?m:U,getToken:()=>Q,getTokenValue:()=>q,getTokenOffset:()=>Z,getTokenLength:()=>L-Z,getTokenStartLine:()=>H,getTokenStartCharacter:()=>Z-I,getTokenError:()=>W}}function g(T){return T===32||T===9}function j(T){return T===10||T===13}function b(T){return T>=48&&T<=57}var d=new Array(20).fill(0).map((T,X)=>{return" ".repeat(X)});var s={" ":{"\n":new Array(200).fill(0).map((T,X)=>{return`
`+" ".repeat(X)}),"\r":new Array(200).fill(0).map((T,X)=>{return"\r"+" ".repeat(X)}),"\r\n":new Array(200).fill(0).map((T,X)=>{return`\r
`+" ".repeat(X)})},"\t":{"\n":new Array(200).fill(0).map((T,X)=>{return`
`+"\t".repeat(X)}),"\r":new Array(200).fill(0).map((T,X)=>{return"\r"+"\t".repeat(X)}),"\r\n":new Array(200).fill(0).map((T,X)=>{return`\r
`+"\t".repeat(X)})}};var E;((v)=>v.DEFAULT={allowTrailingComma:!1})(E||={});function l(T,X=[],J=E.DEFAULT){let L=null,q=[],Z=[];function Q(H){if(Array.isArray(q))q.push(H);else if(L!==null)q[L]=H}return u(T,{onObjectBegin:()=>{let H={};Q(H),Z.push(q),q=H,L=null},onObjectProperty:(H)=>{L=H},onObjectEnd:()=>{q=Z.pop()},onArrayBegin:()=>{let H=[];Q(H),Z.push(q),q=H,L=null},onArrayEnd:()=>{q=Z.pop()},onLiteralValue:Q,onError:(H,D,I)=>{X.push({error:H,offset:D,length:I})}},J),q[0]}function u(T,X,J=E.DEFAULT){let L=R(T,!1),q=[],Z=0;function Q(G){return G?()=>Z===0&&G(L.getTokenOffset(),L.getTokenLength(),L.getTokenStartLine(),L.getTokenStartCharacter()):()=>!0}function A(G){return G?($)=>Z===0&&G($,L.getTokenOffset(),L.getTokenLength(),L.getTokenStartLine(),L.getTokenStartCharacter()):()=>!0}function H(G){return G?($)=>Z===0&&G($,L.getTokenOffset(),L.getTokenLength(),L.getTokenStartLine(),L.getTokenStartCharacter(),()=>q.slice()):()=>!0}function D(G){return G?()=>{if(Z>0)Z++;else if(G(L.getTokenOffset(),L.getTokenLength(),L.getTokenStartLine(),L.getTokenStartCharacter(),()=>q.slice())===!1)Z=1}:()=>!0}function I(G){return G?()=>{if(Z>0)Z--;if(Z===0)G(L.getTokenOffset(),L.getTokenLength(),L.getTokenStartLine(),L.getTokenStartCharacter())}:()=>!0}let W=D(X.onObjectBegin),w=H(X.onObjectProperty),V=I(X.onObjectEnd),_=D(X.onArrayBegin),N=I(X.onArrayEnd),U=H(X.onLiteralValue),O=A(X.onSeparator),m=Q(X.onComment),z=A(X.onError),M=J&&J.disallowComments,k=J&&J.allowTrailingComma;function Y(){while(!0){let G=L.scan();switch(L.getTokenError()){case 4:B(14);break;case 5:B(15);break;case 3:B(13);break;case 1:if(!M)B(11);break;case 2:B(12);break;case 6:B(16);break}switch(G){case 12:case 13:if(M)B(10);else m();break;case 16:B(1);break;case 15:case 14:break;default:return G}}}function B(G,$=[],S=[]){if(z(G),$.length+S.length>0){let F=L.getToken();while(F!==17){if($.indexOf(F)!==-1){Y();break}else if(S.indexOf(F)!==-1)break;F=Y()}}}function P(G){let $=L.getTokenValue();if(G)U($);else w($),q.push($);return Y(),!0}function x(){switch(L.getToken()){case 11:{let G=L.getTokenValue(),$=Number(G);if(isNaN($))B(2),$=0;U($)}break;case 7:U(null);break;case 8:U(!0);break;case 9:U(!1);break;default:return!1}return Y(),!0}function p(){if(L.getToken()!==10)return B(3,[],[2,5]),!1;if(P(!1),L.getToken()===6){if(O(":"),Y(),!K())B(4,[],[2,5])}else B(5,[],[2,5]);return q.pop(),!0}function c(){W(),Y();let G=!1;while(L.getToken()!==2&&L.getToken()!==17){if(L.getToken()===5){if(!G)B(4,[],[]);if(O(","),Y(),L.getToken()===2&&k)break}else if(G)B(6,[],[]);if(!p())B(4,[],[2,5]);G=!0}if(V(),L.getToken()!==2)B(7,[2],[]);else Y();return!0}function C(){_(),Y();let G=!0,$=!1;while(L.getToken()!==4&&L.getToken()!==17){if(L.getToken()===5){if(!$)B(4,[],[]);if(O(","),Y(),L.getToken()===4&&k)break}else if($)B(6,[],[]);if(G)q.push(0),G=!1;else q[q.length-1]++;if(!K())B(4,[],[4,5]);$=!0}if(N(),!G)q.pop();if(L.getToken()!==4)B(8,[4],[]);else Y();return!0}function K(){switch(L.getToken()){case 3:return C();case 1:return c();case 10:return P(!0);default:return x()}}if(Y(),L.getToken()===17){if(J.allowEmptyContent)return!0;return B(4,[],[]),!1}if(!K())return B(4,[],[]),!1;if(L.getToken()!==17)B(9,[],[]);return!0}var h=l;function S0(T){return h(T)}export{S0 as JSONC_Parse};
